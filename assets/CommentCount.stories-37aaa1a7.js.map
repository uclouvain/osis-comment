{"version":3,"file":"CommentCount.stories-37aaa1a7.js","sources":["../../frontend/components/CommentCount.vue"],"sourcesContent":["<!--\n  -\n  - OSIS stands for Open Student Information System. It's an application\n  - designed to manage the core business of higher education institutions,\n  - such as universities, faculties, institutes and professional schools.\n  - The core business involves the administration of students, teachers,\n  - courses, programs and so on.\n  -\n  - Copyright (C) 2015-2023 UniversitÃ© catholique de Louvain (http://www.uclouvain.be)\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU General Public License as published by\n  - the Free Software Foundation, either version 3 of the License, or\n  - (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU General Public License for more details.\n  -\n  - A copy of this license - GNU General Public License - is available\n  - at the root of the source code of this program.  If not,\n  - see http://www.gnu.org/licenses/.\n  -\n  -->\n<template>\n  <div\n      v-if=\"value != 0\"\n      class=\"badge badge-compteur\"\n  >\n    {{ value }}\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent} from 'vue';\nimport {type CountResponse} from \"../interfaces\";\nimport EventBus from \"../event-bus\";\n\nexport default defineComponent({\n  name: 'CommentCount',\n  props: {\n    url: {\n      type: String,\n      required: true,\n    },\n  },\n  data: function () {\n    return {\n      value: null as number | null,\n      loading: true,\n      error: '',\n    };\n  },\n  mounted() {\n    void this.loadCount();\n    EventBus.on(\"REFRESH_COMMENTS_EVENT\",() => void this.loadCount());\n  },\n  methods: {\n    async loadCount() {\n      const response = await fetch(this.url, {\n        mode: 'same-origin',\n        headers: {\n          'Content-Type': 'application/json;charset=utf-8',\n        },\n      });\n      const res = await response.json() as CountResponse;\n      this.value = res.count;\n    },\n  },\n});\n</script>\n\n\n<style>\n  .badge-compteur{\n    display: inline-block;\n    min-width: 10px;\n    padding: 3px 7px;\n    font-weight: 700;\n    line-height: 1;\n    color: #fff;\n    text-align: center;\n    white-space: nowrap;\n    vertical-align: middle;\n    border-radius: 10px;\n    margin-left: 5px;\n    font-size: 9px;\n    background-color: #337ab7;\n  }\n</style>\n"],"names":["_sfc_main","defineComponent","EventBus","res","_hoisted_1","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","__name"],"mappings":"mQAuCA,MAAAA,EAAeC,EAAgB,CAC7B,KAAM,eACN,MAAO,CACL,IAAK,CACH,KAAM,OACN,SAAU,EACZ,CACF,EACA,KAAM,UAAY,CACT,MAAA,CACL,MAAO,KACP,QAAS,GACT,MAAO,EAAA,CAEX,EACA,SAAU,CACH,KAAK,YACVC,EAAS,GAAG,yBAAyB,IAAM,KAAK,KAAK,WAAW,CAClE,EACA,QAAS,CACP,MAAM,WAAY,CAOV,MAAAC,EAAM,MANK,MAAM,MAAM,KAAK,IAAK,CACrC,KAAM,cACN,QAAS,CACP,eAAgB,gCAClB,CAAA,CACD,GAC0B,OAC3B,KAAK,MAAQA,EAAI,KACnB,CACF,CACF,CAAC,QA1CKC,EAAM,CAAA,IAAA,gCAFV,SAAAC,EAAAC,EAAAC,EAAAC,EAKMC,EALNC,EAKMC,EAAA,0DALNC,EAAAP,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}