var Hr=Object.defineProperty;var i=(e,t)=>Hr(e,"name",{value:t,configurable:!0});import{C as Jr,a as Wr,E as Kr,_ as Xr}from"./CommentEntry-6b116fee.js";import{k as Vr,l as K,m as Ce,n as Fe,t as ye,p as Ht,F as Jt,q as Yr,u as He,v as Wt,x as Kt,y as I}from"./vue.esm-bundler-b973b992.js";const sn=Vr({name:"CommentThread",components:{CommentEditor:Jr,CommentEntry:Wr},props:{url:{type:String,required:!0},tags:{type:Array,default:()=>[]},headerTitle:{type:String,default:""},pageSize:{type:Number,default:10},defaultSort:{type:String,default:"-created"},panelClass:{type:String,default:"default"},richTextConfig:{type:Object,default:()=>{}}},data(){const e=new URLSearchParams({limit:String(this.pageSize),sort:"-created"});this.tags.length&&e.append("tags",this.tags.join(","));const t=document.querySelector("[name=csrfmiddlewaretoken]");if(!(t instanceof HTMLInputElement))throw new Error("Please include {% csrf_token %} in your page.");return{entries:[],error:"",createUrl:null,currentUrl:`${this.url}?${e.toString()}`,currentSort:"-created",previousPage:null,nextPage:null,loading:!0,isAdding:!1,csrfToken:t.value}},computed:{isAscendedSort:function(){return this.currentSort==="created"}},mounted(){this.loadEntries()},methods:{async changeSort(){const e=new URL(window.location.origin+this.currentUrl),t=new URLSearchParams(e.search);this.currentSort=this.isAscendedSort?"-created":"created",t.set("sort",this.currentSort),this.currentUrl=`${e.pathname}?${t.toString()}`,await this.loadEntries()},async loadEntries(){const e=await this.doRequest(this.currentUrl,{},!1);e&&(this.createUrl=typeof e.create=="string"?e.create:null,this.previousPage=e.previous,this.nextPage=e.next,this.entries=e.results.map(t=>new Kr(t)))},async createEntry(e){await this.doRequest(this.createUrl,{method:"POST",body:JSON.stringify({comment:e,tags:this.tags})}),this.isAdding=!1},async editEntry(e,t){await this.doRequest(e,{method:"PUT",body:JSON.stringify({comment:t})})},async deleteEntry(e){await this.doRequest(e,{method:"DELETE"})},async doRequest(e,t,r=!0){this.loading=!0;try{const s=await fetch(e,{mode:"same-origin",headers:{"Content-Type":"application/json;charset=utf-8","X-CSRFToken":this.csrfToken},...t});if(s.status>=200&&s.status<300)return r&&await this.loadEntries(),this.loading=!1,s.json();this.error=s.statusText}catch(s){this.error=s.message}this.loading=!1}}});const Zr={class:"panel-heading clearfix"},Qr={key:0,class:"spinner"},es={key:1,class:"panel-body text-danger"},ts={key:3,class:"panel-body"},ns=Ce("i",{class:"fas fa-chevron-left"},null,-1),rs=Ce("i",{class:"fas fa-chevron-right"},null,-1),ss=Ce("i",{class:"fas fa-plus"},null,-1);function os(e,t,r,s,a,c){const d=Kt("CommentEntry"),g=Kt("CommentEditor");return I(),K("div",{class:Ht(["comment-thread panel",`panel-${e.panelClass}`])},[Ce("div",Zr,[Fe(ye(e.headerTitle||e.$t("thread.title"))+" ",1),Ce("button",{class:"btn btn-default btn-sm pull-right",onClick:t[0]||(t[0]=l=>e.changeSort())},[Fe(ye(e.$t("thread.sort"))+" ",1),Ce("i",{class:Ht(["fas",e.isAscendedSort?"fa-sort-up":"fa-sort-down"])},null,2)])]),e.loading?(I(),K("span",Qr)):e.error?(I(),K("div",es,ye(e.error),1)):(I(!0),K(Jt,{key:2},Yr(e.entries,l=>(I(),Wt(d,{key:l.uuid,entry:l,"rich-text-config":e.richTextConfig,onEdit:e.editEntry,onDelete:e.deleteEntry},null,8,["entry","rich-text-config","onEdit","onDelete"]))),128)),e.nextPage||e.previousPage||e.createUrl?(I(),K("div",ts,[e.previousPage?(I(),K("button",{key:0,class:"btn btn-sm btn-default",onClick:t[1]||(t[1]=l=>{e.previousPage&&(e.currentUrl=e.previousPage),e.loadEntries()})},[ns,Fe(" "+ye(e.$t("thread.previous")),1)])):He("",!0),e.nextPage?(I(),K("button",{key:1,class:"btn btn-sm btn-default",onClick:t[2]||(t[2]=l=>{e.nextPage&&(e.currentUrl=e.nextPage),e.loadEntries()})},[Fe(ye(e.$t("thread.next"))+" ",1),rs])):He("",!0),e.createUrl?(I(),K(Jt,{key:2},[e.isAdding?(I(),Wt(g,{key:1,"rich-text-config":e.richTextConfig,onSubmit:e.createEntry,onCancel:t[4]||(t[4]=l=>e.isAdding=!e.isAdding)},null,8,["rich-text-config","onSubmit"])):(I(),K("button",{key:0,class:"btn btn-sm btn-primary pull-right",onClick:t[3]||(t[3]=l=>e.isAdding=!e.isAdding)},[ss,Fe(" "+ye(e.$t("thread.add_comment")),1)]))],64)):He("",!0)])):He("",!0)],2)}i(os,"_sfc_render");const te=Xr(sn,[["render",os]]);sn.__docgenInfo={displayName:"CommentThread",exportName:"default",description:"",tags:{},props:[{name:"url",type:{name:"string"},required:!0},{name:"tags",type:{name:"string[]"},defaultValue:{func:!0,value:"() => []"}},{name:"headerTitle",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"pageSize",type:{name:"number"},defaultValue:{func:!1,value:"10"}},{name:"defaultSort",type:{name:"string"},defaultValue:{func:!1,value:"'-created'"}},{name:"panelClass",type:{name:"string"},defaultValue:{func:!1,value:"'default'"}},{name:"richTextConfig",type:{name:"object"},defaultValue:{func:!0,value:"() => undefined"}}]};var Je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function is(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}i(is,"unwrapExports");function tt(e,t){return t={exports:{}},e(t,t.exports),t.exports}i(tt,"createCommonjsModule");var ve=1e3,we=ve*60,Te=we*60,de=Te*24,as=de*7,cs=de*365.25,us=i(function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return ls(e);if(r==="number"&&isFinite(e))return t.long?ds(e):fs(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},"ms");function ls(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),s=(t[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return r*cs;case"weeks":case"week":case"w":return r*as;case"days":case"day":case"d":return r*de;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Te;case"minutes":case"minute":case"mins":case"min":case"m":return r*we;case"seconds":case"second":case"secs":case"sec":case"s":return r*ve;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}i(ls,"parse");function fs(e){var t=Math.abs(e);return t>=de?Math.round(e/de)+"d":t>=Te?Math.round(e/Te)+"h":t>=we?Math.round(e/we)+"m":t>=ve?Math.round(e/ve)+"s":e+"ms"}i(fs,"fmtShort");function ds(e){var t=Math.abs(e);return t>=de?We(e,t,de,"day"):t>=Te?We(e,t,Te,"hour"):t>=we?We(e,t,we,"minute"):t>=ve?We(e,t,ve,"second"):e+" ms"}i(ds,"fmtLong");function We(e,t,r,s){var a=t>=r*1.5;return Math.round(e/r)+" "+s+(a?"s":"")}i(We,"plural");function hs(e){r.debug=r,r.default=r,r.coerce=l,r.disable=c,r.enable=a,r.enabled=d,r.humanize=us,r.destroy=p,Object.keys(e).forEach(h=>{r[h]=e[h]}),r.names=[],r.skips=[],r.formatters={};function t(h){let m=0;for(let y=0;y<h.length;y++)m=(m<<5)-m+h.charCodeAt(y),m|=0;return r.colors[Math.abs(m)%r.colors.length]}i(t,"selectColor"),r.selectColor=t;function r(h){let m,y=null;function v(...R){if(!v.enabled)return;const $=v,z=Number(new Date),Re=z-(m||z);$.diff=Re,$.prev=m,$.curr=z,m=z,R[0]=r.coerce(R[0]),typeof R[0]!="string"&&R.unshift("%O");let F=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(se,ge)=>{if(se==="%%")return"%";F++;const G=r.formatters[ge];if(typeof G=="function"){const oe=R[F];se=G.call($,oe),R.splice(F,1),F--}return se}),r.formatArgs.call($,R),($.log||r.log).apply($,R)}return i(v,"debug"),v.namespace=h,v.useColors=r.useColors(),v.color=r.selectColor(h),v.extend=s,v.destroy=r.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>y===null?r.enabled(h):y,set:R=>{y=R}}),typeof r.init=="function"&&r.init(v),v}i(r,"createDebug");function s(h,m){const y=r(this.namespace+(typeof m>"u"?":":m)+h);return y.log=this.log,y}i(s,"extend");function a(h){r.save(h),r.names=[],r.skips=[];let m;const y=(typeof h=="string"?h:"").split(/[\s,]+/),v=y.length;for(m=0;m<v;m++)y[m]&&(h=y[m].replace(/\*/g,".*?"),h[0]==="-"?r.skips.push(new RegExp("^"+h.substr(1)+"$")):r.names.push(new RegExp("^"+h+"$")))}i(a,"enable");function c(){const h=[...r.names.map(g),...r.skips.map(g).map(m=>"-"+m)].join(",");return r.enable(""),h}i(c,"disable");function d(h){if(h[h.length-1]==="*")return!0;let m,y;for(m=0,y=r.skips.length;m<y;m++)if(r.skips[m].test(h))return!1;for(m=0,y=r.names.length;m<y;m++)if(r.names[m].test(h))return!0;return!1}i(d,"enabled");function g(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}i(g,"toNamespace");function l(h){return h instanceof Error?h.stack||h.message:h}i(l,"coerce");function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i(p,"destroy"),r.enable(r.load()),r}i(hs,"setup");var ps=hs,j=tt(function(e,t){t.formatArgs=s,t.save=a,t.load=c,t.useColors=r,t.storage=d(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}i(r,"useColors");function s(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const p="color: "+this.color;l.splice(1,0,p,"color: inherit");let h=0,m=0;l[0].replace(/%[a-zA-Z%]/g,y=>{y!=="%%"&&(h++,y==="%c"&&(m=h))}),l.splice(m,0,p)}i(s,"formatArgs"),t.log=console.debug||console.log||(()=>{});function a(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}i(a,"save");function c(){let l;try{l=t.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l={}.DEBUG),l}i(c,"load");function d(){try{return localStorage}catch{}}i(d,"localstorage"),e.exports=ps(t);const{formatters:g}=e.exports;g.j=function(l){try{return JSON.stringify(l)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}}});j.formatArgs;j.save;j.load;j.useColors;j.storage;j.destroy;j.colors;j.log;let on,Ve="default",pt="";const gt=i(()=>{on=j(pt?`fetch-mock:${Ve}:${pt}`:`fetch-mock:${Ve}`)},"newDebug"),gs=i(e=>j(`fetch-mock:${Ve}:${e}`),"newDebugSandbox");gt();var he={debug:(...e)=>{on(...e)},setDebugNamespace:e=>{pt=e,gt()},setDebugPhase:e=>{Ve=e||"default",gt()},getDebug:e=>gs(e)};const{debug:ms,setDebugPhase:an}=he,L={};L.mock=function(...e){return an("setup"),e.length&&this.addRoute(e),this._mock()};L.addRoute=function(e){ms("Adding route",e);const t=this.compileRoute(e),r=this.routes.filter(({identifier:s,method:a})=>(typeof s=="function"?s===t.identifier:String(s)===String(t.identifier))&&(!a||!t.method||a===t.method));if(this.getOption("overwriteRoutes",t)===!1||!r.length)return this._uncompiledRoutes.push(e),this.routes.push(t);if(this.getOption("overwriteRoutes",t)===!0)return r.forEach(s=>{const a=this.routes.indexOf(s);this._uncompiledRoutes.splice(a,1,e),this.routes.splice(a,1,t)}),this.routes;if(r.length)throw new Error("fetch-mock: Adding route with same name or matcher as existing route. See `overwriteRoutes` option.");this._uncompiledRoutes.push(e),this.routes.push(t)};L._mock=function(){return this.isSandbox||(this.realFetch=this.realFetch||this.global.fetch,this.global.fetch=this.fetchHandler),an(),this};L.catch=function(e){return this.fallbackResponse&&console.warn("calling fetchMock.catch() twice - are you sure you want to overwrite the previous fallback response"),this.fallbackResponse=e||"ok",this._mock()};L.spy=function(e){return this._mock(),e?this.mock(e,this.getNativeFetch()):this.catch(this.getNativeFetch())};const Ye=i((e,t,r)=>{L[e]=function(s,a,c){return this[t](s,a,Object.assign(c||{},r))}},"defineShorthand"),Ze=i((e,t)=>{L[e]=function(r,s){return this[t]({},r,s)}},"defineGreedyShorthand");Ye("sticky","mock",{sticky:!0});Ye("once","mock",{repeat:1});Ze("any","mock");Ze("anyOnce","once");["get","post","put","delete","head","patch"].forEach(e=>{Ye(e,"mock",{method:e}),Ye(`${e}Once`,"once",{method:e}),Ze(`${e}Any`,e),Ze(`${e}AnyOnce`,`${e}Once`)});const ys=i(e=>{typeof e=="function"&&(console.warn("Deprecated: Passing fetch-mock reset methods\ndirectly in as handlers for before/after test runner hooks.\nWrap in an arrow function instead e.g. `() => fetchMock.restore()`"),e())},"mochaAsyncHookWorkaround"),bs=i(({sticky:e})=>t=>e?[]:t.filter(({sticky:r})=>r),"getRouteRemover");L.resetBehavior=function(e={}){ys(e);const t=bs(e);return this.routes=t(this.routes),this._uncompiledRoutes=t(this._uncompiledRoutes),this.realFetch&&!this.routes.length&&(this.global.fetch=this.realFetch,this.realFetch=void 0),this.fallbackResponse=void 0,this};L.resetHistory=function(){return this._calls=[],this._holdingPromises=[],this.routes.forEach(e=>e.reset&&e.reset()),this};L.restore=L.reset=function(e){return this.resetBehavior(e),this.resetHistory(),this};var Cs=L;const{getDebug:vs}=he,Xt=["body","headers","throws","status","redirectUrl"];class cn{constructor(t){this.debug=vs("ResponseBuilder()"),this.debug("Response builder created with options",t),Object.assign(this,t)}exec(){this.debug("building response"),this.normalizeResponseConfig(),this.constructFetchOpts(),this.constructResponseBody();const t=new this.fetchMock.config.Response(this.body,this.options),r=this.buildObservableResponse(t);return[t,r]}sendAsObject(){return Xt.some(t=>this.responseConfig[t])?!Object.keys(this.responseConfig).every(t=>Xt.includes(t)):!0}normalizeResponseConfig(){typeof this.responseConfig=="number"?(this.debug("building response using status",this.responseConfig),this.responseConfig={status:this.responseConfig}):(typeof this.responseConfig=="string"||this.sendAsObject())&&(this.debug("building text response from",this.responseConfig),this.responseConfig={body:this.responseConfig})}validateStatus(t){if(!t)return this.debug("No status provided. Defaulting to 200"),200;if(typeof t=="number"&&parseInt(t,10)!==t&&t>=200||t<600)return this.debug("Valid status provided",t),t;throw new TypeError(`fetch-mock: Invalid status ${t} passed on response object.
To respond with a JSON object that has status as a property assign the object to body
e.g. {"body": {"status: "registered"}}`)}constructFetchOpts(){this.options=this.responseConfig.options||{},this.options.url=this.responseConfig.redirectUrl||this.url,this.options.status=this.validateStatus(this.responseConfig.status),this.options.statusText=this.fetchMock.statusTextMap[String(this.options.status)],this.options.headers=new this.fetchMock.config.Headers(this.responseConfig.headers||{})}getOption(t){return this.fetchMock.getOption(t,this.route)}convertToJson(){this.getOption("sendAsJson")&&this.responseConfig.body!=null&&typeof this.body=="object"&&(this.debug("Stringifying JSON response body"),this.body=JSON.stringify(this.body),this.options.headers.has("Content-Type")||this.options.headers.set("Content-Type","application/json"))}setContentLength(){this.getOption("includeContentLength")&&typeof this.body=="string"&&!this.options.headers.has("Content-Length")&&(this.debug("Setting content-length header:",this.body.length.toString()),this.options.headers.set("Content-Length",this.body.length.toString()))}constructResponseBody(){if(this.body=this.responseConfig.body,this.convertToJson(),this.setContentLength(),this.Stream){this.debug("Creating response stream");const t=new this.Stream.Readable;this.body!=null&&t.push(this.body,"utf-8"),t.push(null),this.body=t}this.body=this.body}buildObservableResponse(t){const r=this.fetchMock;return t._fmResults={},this.debug("Wrapping Response in ES proxy for observability"),new Proxy(t,{get:(s,a)=>{if(this.responseConfig.redirectUrl){if(a==="url")return this.debug("Retrieving redirect url",this.responseConfig.redirectUrl),this.responseConfig.redirectUrl;if(a==="redirected")return this.debug("Retrieving redirected status",!0),!0}return typeof s[a]=="function"?(this.debug("Wrapping body promises in ES proxies for observability"),new Proxy(s[a],{apply:(c,d,g)=>{this.debug(`Calling res.${a}`);const l=c.apply(t,g);return l.then&&(r._holdingPromises.push(l.catch(()=>null)),s._fmResults[a]=l),l}})):s[a]}})}}i(cn,"ResponseBuilder");var ws=i(e=>new cn(e).exec(),"responseBuilder");let Q;const mt=new RegExp("^[a-z]+://","i"),Ts=new RegExp("^//","i"),Vt=i(e=>typeof e.raw=="function"?Object.entries(e.raw()):e[Symbol.iterator]?[...e]:Object.entries(e),"headersToArray"),Yt=i(e=>e.reduce((t,[r,s])=>Object.assign(t,{[r]:s}),{}),"zipObject"),ht=i(e=>{if(typeof e=="function"||e instanceof RegExp||/^(begin|end|glob|express|path)\:/.test(e))return e;if(mt.test(e))return new Q(e).href;if(Ts.test(e))return new Q(e,"http://dummy").href;{const t=new Q(e,"http://dummy");return t.pathname+t.search}},"normalizeUrl"),_s=i(async e=>{try{return"body"in e?e.body.toString():e.clone().text()}catch{}},"extractBody");var nt={setUrlImplementation:e=>{Q=e},normalizeRequest:(e,t,r)=>{if(r.prototype.isPrototypeOf(e)){const s={method:e.method},a=_s(e);typeof a<"u"&&(s.body=a);const c={url:ht(e.url),options:Object.assign(s,t),request:e,signal:t&&t.signal||e.signal},d=Vt(e.headers);return d.length&&(c.options.headers=Yt(d)),c}else{if(typeof e=="string"||typeof e=="object"&&"href"in e)return{url:ht(e),options:t,signal:t&&t.signal};throw typeof e=="object"?new TypeError("fetch-mock: Unrecognised Request object. Read the Config and Installation sections of the docs"):new TypeError("fetch-mock: Invalid arguments passed to fetch")}},normalizeUrl:ht,getPath:e=>(mt.test(e)?new Q(e):new Q(e,"http://dummy")).pathname,getQuery:e=>{const t=mt.test(e)?new Q(e):new Q(e,"http://dummy");return t.search?t.search.substr(1):""},headers:{normalize:e=>Yt(Vt(e)),toLowerCase:e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{}),equal:(e,t)=>(e=Array.isArray(e)?e:[e],t=Array.isArray(t)?t:[t],e.length!==t.length?!1:e.every((r,s)=>r===t[s]))}};const{debug:$e,setDebugPhase:un,getDebug:rt}=he,D={};class ln extends Error{constructor(){super(...arguments),this.name="AbortError",this.message="The operation was aborted.",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}i(ln,"AbortError");const Rs=i(e=>typeof navigator>"u"||!navigator.vendor||navigator.vendor!=="Apple Computer, Inc."?e:async t=>{const{method:r}=t;if(!["POST","PUT","PATCH"].includes(r))return e(t);const s=await t.clone().text(),{cache:a,credentials:c,headers:d,integrity:g,mode:l,redirect:p,referrer:h}=t,m={body:s,cache:a,credentials:c,headers:d,integrity:g,mode:l,redirect:p,referrer:h,method:r};return e(t.url,m)},"patchNativeFetchForSafari"),Es=i(async({response:e,responseIsFetch:t=!1},r,s,a)=>{const c=rt("resolve()");for(c("Recursively resolving function and promise responses");;)if(typeof e=="function"){if(c("  Response is a function"),t)return a?(c("  -> Calling fetch with Request instance"),e(a)):(c("  -> Calling fetch with url and options"),e(r,s));c("  -> Calling response function"),e=e(r,s,a)}else if(typeof e.then=="function")c("  Response is a promise"),c("  -> Resolving promise"),e=await e;else return c("  Response is not a function or a promise"),c("  -> Exiting response resolution recursion"),e},"resolve");D.needsAsyncBodyExtraction=function({request:e}){return e&&this.routes.some(({usesBody:t})=>t)};D.fetchHandler=function(e,t){un("handle");const r=rt("fetchHandler()");r("fetch called with:",e,t);const s=nt.normalizeRequest(e,t,this.config.Request);return r("Request normalised"),r("  url",s.url),r("  options",s.options),r("  request",s.request),r("  signal",s.signal),this.needsAsyncBodyExtraction(s)?(r("Need to wait for Body to be streamed before calling router: switching to async mode"),this._extractBodyThenHandle(s)):this._fetchHandler(s)};D._extractBodyThenHandle=async function(e){return e.options.body=await e.options.body,this._fetchHandler(e)};D._fetchHandler=function({url:e,options:t,request:r,signal:s}){const{route:a,callLog:c}=this.executeRouter(e,t,r);this.recordCall(c);let d;return this._holdingPromises.push(new this.config.Promise(g=>d=g)),new this.config.Promise((g,l)=>{if(s){$e("signal exists - enabling fetch abort");const p=i(()=>{$e("aborting fetch"),l(typeof DOMException<"u"?new DOMException("The operation was aborted.","AbortError"):new ln),d()},"abort");s.aborted&&($e("signal is already aborted - aborting the fetch"),p()),s.addEventListener("abort",p)}this.generateResponse({route:a,url:e,options:t,request:r,callLog:c}).then(g,l).then(d,d).then(()=>{un()})})};D.fetchHandler.isMock=!0;D.executeRouter=function(e,t,r){const s=rt("executeRouter()"),a={url:e,options:t,request:r,isUnmatched:!0};if(s("Attempting to match request to a route"),this.getOption("fallbackToNetwork")==="always")return s("  Configured with fallbackToNetwork=always - passing through to fetch"),{route:{response:this.getNativeFetch(),responseIsFetch:!0}};const c=this.router(e,t,r);if(c)return s("  Matching route found"),{route:c,callLog:{url:e,options:t,request:r,identifier:c.identifier}};if(this.getOption("warnOnFallback")&&console.warn(`Unmatched ${t&&t.method||"GET"} to ${e}`),this.fallbackResponse)return s("  No matching route found - using fallbackResponse"),{route:{response:this.fallbackResponse},callLog:a};if(!this.getOption("fallbackToNetwork"))throw new Error(`fetch-mock: No fallback response defined for ${t&&t.method||"GET"} to ${e}`);return s("  Configured to fallbackToNetwork - passing through to fetch"),{route:{response:this.getNativeFetch(),responseIsFetch:!0},callLog:a}};D.generateResponse=async function({route:e,url:t,options:r,request:s,callLog:a={}}){const c=rt("generateResponse()"),d=await Es(e,t,r,s);if(d.throws&&typeof d!="function")throw c("response.throws is defined - throwing an error"),d.throws;if(this.config.Response.prototype.isPrototypeOf(d))return c("response is already a Response instance - returning it"),a.response=d,d;const[g,l]=ws({url:t,responseConfig:d,fetchMock:this,route:e});return a.response=g,l};D.router=function(e,t,r){const s=this.routes.find((a,c)=>($e(`Trying to match route ${c}`),a.matcher(e,t,r)));if(s)return s};D.getNativeFetch=function(){const e=this.realFetch||this.isSandbox&&this.config.fetch;if(!e)throw new Error("fetch-mock: Falling back to network only available on global fetch-mock, or by setting config.fetch on sandboxed fetch-mock");return Rs(e)};D.recordCall=function(e){$e("Recording fetch call",e),e&&this._calls.push(e)};var As=D,xs=i(function(e,t){if(typeof e!="string")throw new TypeError("Expected a string");for(var r=String(e),s="",a=t?!!t.extended:!1,c=t?!!t.globstar:!1,d=!1,g=t&&typeof t.flags=="string"?t.flags:"",l,p=0,h=r.length;p<h;p++)switch(l=r[p],l){case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":s+="\\"+l;break;case"?":if(a){s+=".";break}case"[":case"]":if(a){s+=l;break}case"{":if(a){d=!0,s+="(";break}case"}":if(a){d=!1,s+=")";break}case",":if(d){s+="|";break}s+="\\"+l;break;case"*":for(var m=r[p-1],y=1;r[p+1]==="*";)y++,p++;var v=r[p+1];if(!c)s+=".*";else{var R=y>1&&(m==="/"||m===void 0)&&(v==="/"||v===void 0);R?(s+="((?:[^/]*(?:/|$))*)",p++):s+="([^/]*)"}break;default:s+=l}return(!g||!~g.indexOf("g"))&&(s="^"+s+"$"),new RegExp(s,g)},"globToRegexp"),_e=mn,Ss=bt,Fs=ks,Os=hn,Ps=gn,fn="/",dn="./",$s=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function bt(e,t){for(var r=[],s=0,a=0,c="",d=t&&t.delimiter||fn,g=t&&t.delimiters||dn,l=!1,p;(p=$s.exec(e))!==null;){var h=p[0],m=p[1],y=p.index;if(c+=e.slice(a,y),a=y+h.length,m){c+=m[1],l=!0;continue}var v="",R=e[a],$=p[2],z=p[3],Re=p[4],F=p[5];if(!l&&c.length){var re=c.length-1;g.indexOf(c[re])>-1&&(v=c[re],c=c.slice(0,re))}c&&(r.push(c),c="",l=!1);var se=v!==""&&R!==void 0&&R!==v,ge=F==="+"||F==="*",G=F==="?"||F==="*",oe=v||d,Ue=z||Re;r.push({name:$||s++,prefix:v,delimiter:oe,optional:G,repeat:ge,partial:se,pattern:Ue?Ms(Ue):"[^"+Z(oe)+"]+?"})}return(c||a<e.length)&&r.push(c+e.substr(a)),r}i(bt,"parse$1");function ks(e,t){return hn(bt(e,t))}i(ks,"compile");function hn(e){for(var t=new Array(e.length),r=0;r<e.length;r++)typeof e[r]=="object"&&(t[r]=new RegExp("^(?:"+e[r].pattern+")$"));return function(s,a){for(var c="",d=a&&a.encode||encodeURIComponent,g=0;g<e.length;g++){var l=e[g];if(typeof l=="string"){c+=l;continue}var p=s?s[l.name]:void 0,h;if(Array.isArray(p)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but got array');if(p.length===0){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var m=0;m<p.length;m++){if(h=d(p[m],l),!t[g].test(h))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'"');c+=(m===0?l.prefix:l.delimiter)+h}continue}if(typeof p=="string"||typeof p=="number"||typeof p=="boolean"){if(h=d(String(p),l),!t[g].test(h))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but got "'+h+'"');c+=l.prefix+h;continue}if(l.optional){l.partial&&(c+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be '+(l.repeat?"an array":"a string"))}return c}}i(hn,"tokensToFunction");function Z(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}i(Z,"escapeString");function Ms(e){return e.replace(/([=!:$/()])/g,"\\$1")}i(Ms,"escapeGroup");function pn(e){return e&&e.sensitive?"":"i"}i(pn,"flags");function Us(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var s=0;s<r.length;s++)t.push({name:s,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return e}i(Us,"regexpToRegexp");function Ls(e,t,r){for(var s=[],a=0;a<e.length;a++)s.push(mn(e[a],t,r).source);return new RegExp("(?:"+s.join("|")+")",pn(r))}i(Ls,"arrayToRegexp");function Ns(e,t,r){return gn(bt(e,r),t,r)}i(Ns,"stringToRegexp");function gn(e,t,r){r=r||{};for(var s=r.strict,a=r.start!==!1,c=r.end!==!1,d=Z(r.delimiter||fn),g=r.delimiters||dn,l=[].concat(r.endsWith||[]).map(Z).concat("$").join("|"),p=a?"^":"",h=e.length===0,m=0;m<e.length;m++){var y=e[m];if(typeof y=="string")p+=Z(y),h=m===e.length-1&&g.indexOf(y[y.length-1])>-1;else{var v=y.repeat?"(?:"+y.pattern+")(?:"+Z(y.delimiter)+"(?:"+y.pattern+"))*":y.pattern;t&&t.push(y),y.optional?y.partial?p+=Z(y.prefix)+"("+v+")?":p+="(?:"+Z(y.prefix)+"("+v+"))?":p+=Z(y.prefix)+"("+v+")"}}return c?(s||(p+="(?:"+d+")?"),p+=l==="$"?"$":"(?="+l+")"):(s||(p+="(?:"+d+"(?="+l+"))?"),h||(p+="(?="+d+"|"+l+")")),new RegExp(p,pn(r))}i(gn,"tokensToRegExp");function mn(e,t,r){return e instanceof RegExp?Us(e,t):Array.isArray(e)?Ls(e,t,r):Ns(e,t,r)}i(mn,"pathToRegexp");_e.parse=Ss;_e.compile=Fs;_e.tokensToFunction=Os;_e.tokensToRegExp=Ps;function Is(e,t){return Object.prototype.hasOwnProperty.call(e,t)}i(Is,"hasOwnProperty");var js=i(function(e,t,r,s){t=t||"&",r=r||"=";var a={};if(typeof e!="string"||e.length===0)return a;var c=/\+/g;e=e.split(t);var d=1e3;s&&typeof s.maxKeys=="number"&&(d=s.maxKeys);var g=e.length;d>0&&g>d&&(g=d);for(var l=0;l<g;++l){var p=e[l].replace(c,"%20"),h=p.indexOf(r),m,y,v,R;h>=0?(m=p.substr(0,h),y=p.substr(h+1)):(m=p,y=""),v=decodeURIComponent(m),R=decodeURIComponent(y),Is(a,v)?Array.isArray(a[v])?a[v].push(R):a[v]=[a[v],R]:a[v]=R}return a},"decode"),Oe=i(function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},"stringifyPrimitive"),Ds=i(function(e,t,r,s){return t=t||"&",r=r||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(a){var c=encodeURIComponent(Oe(a))+r;return Array.isArray(e[a])?e[a].map(function(d){return c+encodeURIComponent(Oe(d))}).join(t):c+encodeURIComponent(Oe(e[a]))}).join(t):s?encodeURIComponent(Oe(s))+r+encodeURIComponent(Oe(e)):""},"encode"),fe=tt(function(e,t){t.decode=t.parse=js,t.encode=t.stringify=Ds});fe.decode;fe.parse;fe.encode;fe.stringify;var yn=tt(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(s){function a(c,d){return s.apply(this,arguments)}return i(a,"isSubset"),a.toString=function(){return s.toString()},a}(function(s,a){return typeof s!="object"||s===null||typeof a!="object"||a===null?!1:Object.keys(a).every(function(c){if(!s.propertyIsEnumerable(c))return!1;var d=a[c],g=s[c];return!(typeof d=="object"&&d!==null?!r(g,d):g!==d)})});t.default=r,e.exports=t.default});is(yn);var bn=tt(function(e,t){var r=200,s="__lodash_hash_undefined__",a=1,c=2,d=9007199254740991,g="[object Arguments]",l="[object Array]",p="[object AsyncFunction]",h="[object Boolean]",m="[object Date]",y="[object Error]",v="[object Function]",R="[object GeneratorFunction]",$="[object Map]",z="[object Number]",Re="[object Null]",F="[object Object]",re="[object Promise]",se="[object Proxy]",ge="[object RegExp]",G="[object Set]",oe="[object String]",Ue="[object Symbol]",wn="[object Undefined]",st="[object WeakMap]",vt="[object ArrayBuffer]",Le="[object DataView]",Tn="[object Float32Array]",_n="[object Float64Array]",Rn="[object Int8Array]",En="[object Int16Array]",An="[object Int32Array]",xn="[object Uint8Array]",Sn="[object Uint8ClampedArray]",Fn="[object Uint16Array]",On="[object Uint32Array]",Pn=/[\\^$.*+?()[\]{}|]/g,$n=/^\[object .+?Constructor\]$/,kn=/^(?:0|[1-9]\d*)$/,T={};T[Tn]=T[_n]=T[Rn]=T[En]=T[An]=T[xn]=T[Sn]=T[Fn]=T[On]=!0,T[g]=T[l]=T[vt]=T[h]=T[Le]=T[m]=T[y]=T[v]=T[$]=T[z]=T[F]=T[ge]=T[G]=T[oe]=T[st]=!1;var wt=typeof Je=="object"&&Je&&Je.Object===Object&&Je,Mn=typeof self=="object"&&self&&self.Object===Object&&self,H=wt||Mn||Function("return this")(),Tt=t&&!t.nodeType&&t,_t=Tt&&!0&&e&&!e.nodeType&&e,Rt=_t&&_t.exports===Tt,ot=Rt&&wt.process,Et=function(){try{return ot&&ot.binding&&ot.binding("util")}catch{}}(),At=Et&&Et.isTypedArray;function Un(n,o){for(var u=-1,f=n==null?0:n.length,_=0,C=[];++u<f;){var A=n[u];o(A,u,n)&&(C[_++]=A)}return C}i(Un,"arrayFilter");function Ln(n,o){for(var u=-1,f=o.length,_=n.length;++u<f;)n[_+u]=o[u];return n}i(Ln,"arrayPush");function Nn(n,o){for(var u=-1,f=n==null?0:n.length;++u<f;)if(o(n[u],u,n))return!0;return!1}i(Nn,"arraySome");function In(n,o){for(var u=-1,f=Array(n);++u<n;)f[u]=o(u);return f}i(In,"baseTimes");function jn(n){return function(o){return n(o)}}i(jn,"baseUnary");function Dn(n,o){return n.has(o)}i(Dn,"cacheHas");function Bn(n,o){return n==null?void 0:n[o]}i(Bn,"getValue");function qn(n){var o=-1,u=Array(n.size);return n.forEach(function(f,_){u[++o]=[_,f]}),u}i(qn,"mapToArray");function zn(n,o){return function(u){return n(o(u))}}i(zn,"overArg");function Gn(n){var o=-1,u=Array(n.size);return n.forEach(function(f){u[++o]=f}),u}i(Gn,"setToArray");var Hn=Array.prototype,Jn=Function.prototype,Ne=Object.prototype,it=H["__core-js_shared__"],xt=Jn.toString,B=Ne.hasOwnProperty,St=function(){var n=/[^.]+$/.exec(it&&it.keys&&it.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Ft=Ne.toString,Wn=RegExp("^"+xt.call(B).replace(Pn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ot=Rt?H.Buffer:void 0,Ie=H.Symbol,Pt=H.Uint8Array,$t=Ne.propertyIsEnumerable,Kn=Hn.splice,ie=Ie?Ie.toStringTag:void 0,kt=Object.getOwnPropertySymbols,Xn=Ot?Ot.isBuffer:void 0,Vn=zn(Object.keys,Object),at=me(H,"DataView"),Ee=me(H,"Map"),ct=me(H,"Promise"),ut=me(H,"Set"),lt=me(H,"WeakMap"),Ae=me(Object,"create"),Yn=ue(at),Zn=ue(Ee),Qn=ue(ct),er=ue(ut),tr=ue(lt),Mt=Ie?Ie.prototype:void 0,ft=Mt?Mt.valueOf:void 0;function ae(n){var o=-1,u=n==null?0:n.length;for(this.clear();++o<u;){var f=n[o];this.set(f[0],f[1])}}i(ae,"Hash");function nr(){this.__data__=Ae?Ae(null):{},this.size=0}i(nr,"hashClear");function rr(n){var o=this.has(n)&&delete this.__data__[n];return this.size-=o?1:0,o}i(rr,"hashDelete");function sr(n){var o=this.__data__;if(Ae){var u=o[n];return u===s?void 0:u}return B.call(o,n)?o[n]:void 0}i(sr,"hashGet");function or(n){var o=this.__data__;return Ae?o[n]!==void 0:B.call(o,n)}i(or,"hashHas");function ir(n,o){var u=this.__data__;return this.size+=this.has(n)?0:1,u[n]=Ae&&o===void 0?s:o,this}i(ir,"hashSet"),ae.prototype.clear=nr,ae.prototype.delete=rr,ae.prototype.get=sr,ae.prototype.has=or,ae.prototype.set=ir;function J(n){var o=-1,u=n==null?0:n.length;for(this.clear();++o<u;){var f=n[o];this.set(f[0],f[1])}}i(J,"ListCache");function ar(){this.__data__=[],this.size=0}i(ar,"listCacheClear");function cr(n){var o=this.__data__,u=De(o,n);if(u<0)return!1;var f=o.length-1;return u==f?o.pop():Kn.call(o,u,1),--this.size,!0}i(cr,"listCacheDelete");function ur(n){var o=this.__data__,u=De(o,n);return u<0?void 0:o[u][1]}i(ur,"listCacheGet");function lr(n){return De(this.__data__,n)>-1}i(lr,"listCacheHas");function fr(n,o){var u=this.__data__,f=De(u,n);return f<0?(++this.size,u.push([n,o])):u[f][1]=o,this}i(fr,"listCacheSet"),J.prototype.clear=ar,J.prototype.delete=cr,J.prototype.get=ur,J.prototype.has=lr,J.prototype.set=fr;function ce(n){var o=-1,u=n==null?0:n.length;for(this.clear();++o<u;){var f=n[o];this.set(f[0],f[1])}}i(ce,"MapCache");function dr(){this.size=0,this.__data__={hash:new ae,map:new(Ee||J),string:new ae}}i(dr,"mapCacheClear");function hr(n){var o=Be(this,n).delete(n);return this.size-=o?1:0,o}i(hr,"mapCacheDelete");function pr(n){return Be(this,n).get(n)}i(pr,"mapCacheGet");function gr(n){return Be(this,n).has(n)}i(gr,"mapCacheHas");function mr(n,o){var u=Be(this,n),f=u.size;return u.set(n,o),this.size+=u.size==f?0:1,this}i(mr,"mapCacheSet"),ce.prototype.clear=dr,ce.prototype.delete=hr,ce.prototype.get=pr,ce.prototype.has=gr,ce.prototype.set=mr;function je(n){var o=-1,u=n==null?0:n.length;for(this.__data__=new ce;++o<u;)this.add(n[o])}i(je,"SetCache");function yr(n){return this.__data__.set(n,s),this}i(yr,"setCacheAdd");function br(n){return this.__data__.has(n)}i(br,"setCacheHas"),je.prototype.add=je.prototype.push=yr,je.prototype.has=br;function X(n){var o=this.__data__=new J(n);this.size=o.size}i(X,"Stack");function Cr(){this.__data__=new J,this.size=0}i(Cr,"stackClear");function vr(n){var o=this.__data__,u=o.delete(n);return this.size=o.size,u}i(vr,"stackDelete");function wr(n){return this.__data__.get(n)}i(wr,"stackGet");function Tr(n){return this.__data__.has(n)}i(Tr,"stackHas");function _r(n,o){var u=this.__data__;if(u instanceof J){var f=u.__data__;if(!Ee||f.length<r-1)return f.push([n,o]),this.size=++u.size,this;u=this.__data__=new ce(f)}return u.set(n,o),this.size=u.size,this}i(_r,"stackSet"),X.prototype.clear=Cr,X.prototype.delete=vr,X.prototype.get=wr,X.prototype.has=Tr,X.prototype.set=_r;function Rr(n,o){var u=qe(n),f=!u&&jr(n),_=!u&&!f&&dt(n),C=!u&&!f&&!_&&zt(n),A=u||f||_||C,x=A?In(n.length,String):[],S=x.length;for(var E in n)(o||B.call(n,E))&&!(A&&(E=="length"||_&&(E=="offset"||E=="parent")||C&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||Mr(E,S)))&&x.push(E);return x}i(Rr,"arrayLikeKeys");function De(n,o){for(var u=n.length;u--;)if(jt(n[u][0],o))return u;return-1}i(De,"assocIndexOf");function Er(n,o,u){var f=o(n);return qe(n)?f:Ln(f,u(n))}i(Er,"baseGetAllKeys");function xe(n){return n==null?n===void 0?wn:Re:ie&&ie in Object(n)?$r(n):Ir(n)}i(xe,"baseGetTag");function Ut(n){return Se(n)&&xe(n)==g}i(Ut,"baseIsArguments");function Lt(n,o,u,f,_){return n===o?!0:n==null||o==null||!Se(n)&&!Se(o)?n!==n&&o!==o:Ar(n,o,u,f,Lt,_)}i(Lt,"baseIsEqual");function Ar(n,o,u,f,_,C){var A=qe(n),x=qe(o),S=A?l:V(n),E=x?l:V(o);S=S==g?F:S,E=E==g?F:E;var k=S==F,N=E==F,O=S==E;if(O&&dt(n)){if(!dt(o))return!1;A=!0,k=!1}if(O&&!k)return C||(C=new X),A||zt(n)?Nt(n,o,u,f,_,C):Or(n,o,S,u,f,_,C);if(!(u&a)){var M=k&&B.call(n,"__wrapped__"),U=N&&B.call(o,"__wrapped__");if(M||U){var Y=M?n.value():n,W=U?o.value():o;return C||(C=new X),_(Y,W,u,f,C)}}return O?(C||(C=new X),Pr(n,o,u,f,_,C)):!1}i(Ar,"baseIsEqualDeep");function xr(n){if(!qt(n)||Lr(n))return!1;var o=Dt(n)?Wn:$n;return o.test(ue(n))}i(xr,"baseIsNative");function Sr(n){return Se(n)&&Bt(n.length)&&!!T[xe(n)]}i(Sr,"baseIsTypedArray");function Fr(n){if(!Nr(n))return Vn(n);var o=[];for(var u in Object(n))B.call(n,u)&&u!="constructor"&&o.push(u);return o}i(Fr,"baseKeys");function Nt(n,o,u,f,_,C){var A=u&a,x=n.length,S=o.length;if(x!=S&&!(A&&S>x))return!1;var E=C.get(n);if(E&&C.get(o))return E==o;var k=-1,N=!0,O=u&c?new je:void 0;for(C.set(n,o),C.set(o,n);++k<x;){var M=n[k],U=o[k];if(f)var Y=A?f(U,M,k,o,n,C):f(M,U,k,n,o,C);if(Y!==void 0){if(Y)continue;N=!1;break}if(O){if(!Nn(o,function(W,le){if(!Dn(O,le)&&(M===W||_(M,W,u,f,C)))return O.push(le)})){N=!1;break}}else if(!(M===U||_(M,U,u,f,C))){N=!1;break}}return C.delete(n),C.delete(o),N}i(Nt,"equalArrays");function Or(n,o,u,f,_,C,A){switch(u){case Le:if(n.byteLength!=o.byteLength||n.byteOffset!=o.byteOffset)return!1;n=n.buffer,o=o.buffer;case vt:return!(n.byteLength!=o.byteLength||!C(new Pt(n),new Pt(o)));case h:case m:case z:return jt(+n,+o);case y:return n.name==o.name&&n.message==o.message;case ge:case oe:return n==o+"";case $:var x=qn;case G:var S=f&a;if(x||(x=Gn),n.size!=o.size&&!S)return!1;var E=A.get(n);if(E)return E==o;f|=c,A.set(n,o);var k=Nt(x(n),x(o),f,_,C,A);return A.delete(n),k;case Ue:if(ft)return ft.call(n)==ft.call(o)}return!1}i(Or,"equalByTag");function Pr(n,o,u,f,_,C){var A=u&a,x=It(n),S=x.length,E=It(o),k=E.length;if(S!=k&&!A)return!1;for(var N=S;N--;){var O=x[N];if(!(A?O in o:B.call(o,O)))return!1}var M=C.get(n);if(M&&C.get(o))return M==o;var U=!0;C.set(n,o),C.set(o,n);for(var Y=A;++N<S;){O=x[N];var W=n[O],le=o[O];if(f)var Gt=A?f(le,W,O,o,n,C):f(W,le,O,n,o,C);if(!(Gt===void 0?W===le||_(W,le,u,f,C):Gt)){U=!1;break}Y||(Y=O=="constructor")}if(U&&!Y){var ze=n.constructor,Ge=o.constructor;ze!=Ge&&"constructor"in n&&"constructor"in o&&!(typeof ze=="function"&&ze instanceof ze&&typeof Ge=="function"&&Ge instanceof Ge)&&(U=!1)}return C.delete(n),C.delete(o),U}i(Pr,"equalObjects");function It(n){return Er(n,qr,kr)}i(It,"getAllKeys");function Be(n,o){var u=n.__data__;return Ur(o)?u[typeof o=="string"?"string":"hash"]:u.map}i(Be,"getMapData");function me(n,o){var u=Bn(n,o);return xr(u)?u:void 0}i(me,"getNative");function $r(n){var o=B.call(n,ie),u=n[ie];try{n[ie]=void 0;var f=!0}catch{}var _=Ft.call(n);return f&&(o?n[ie]=u:delete n[ie]),_}i($r,"getRawTag");var kr=kt?function(n){return n==null?[]:(n=Object(n),Un(kt(n),function(o){return $t.call(n,o)}))}:zr,V=xe;(at&&V(new at(new ArrayBuffer(1)))!=Le||Ee&&V(new Ee)!=$||ct&&V(ct.resolve())!=re||ut&&V(new ut)!=G||lt&&V(new lt)!=st)&&(V=i(function(n){var o=xe(n),u=o==F?n.constructor:void 0,f=u?ue(u):"";if(f)switch(f){case Yn:return Le;case Zn:return $;case Qn:return re;case er:return G;case tr:return st}return o},"getTag"));function Mr(n,o){return o=o??d,!!o&&(typeof n=="number"||kn.test(n))&&n>-1&&n%1==0&&n<o}i(Mr,"isIndex");function Ur(n){var o=typeof n;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?n!=="__proto__":n===null}i(Ur,"isKeyable");function Lr(n){return!!St&&St in n}i(Lr,"isMasked");function Nr(n){var o=n&&n.constructor,u=typeof o=="function"&&o.prototype||Ne;return n===u}i(Nr,"isPrototype");function Ir(n){return Ft.call(n)}i(Ir,"objectToString");function ue(n){if(n!=null){try{return xt.call(n)}catch{}try{return n+""}catch{}}return""}i(ue,"toSource");function jt(n,o){return n===o||n!==n&&o!==o}i(jt,"eq");var jr=Ut(function(){return arguments}())?Ut:function(n){return Se(n)&&B.call(n,"callee")&&!$t.call(n,"callee")},qe=Array.isArray;function Dr(n){return n!=null&&Bt(n.length)&&!Dt(n)}i(Dr,"isArrayLike");var dt=Xn||Gr;function Br(n,o){return Lt(n,o)}i(Br,"isEqual");function Dt(n){if(!qt(n))return!1;var o=xe(n);return o==v||o==R||o==p||o==se}i(Dt,"isFunction");function Bt(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=d}i(Bt,"isLength");function qt(n){var o=typeof n;return n!=null&&(o=="object"||o=="function")}i(qt,"isObject");function Se(n){return n!=null&&typeof n=="object"}i(Se,"isObjectLike");var zt=At?jn(At):Sr;function qr(n){return Dr(n)?Rr(n):Fr(n)}i(qr,"keys");function zr(){return[]}i(zr,"stubArray");function Gr(){return!1}i(Gr,"stubFalse"),e.exports=Br});const{debug:b}=he,{headers:Ke,getPath:yt,getQuery:Bs,normalizeUrl:Zt}=nt,Pe=i(e=>t=>(b("Actual url:",t),e(t)),"debuggableUrlFunc"),Qt={begin:e=>Pe(t=>t.indexOf(e)===0),end:e=>Pe(t=>t.substr(-e.length)===e),glob:e=>{const t=xs(e);return Pe(r=>t.test(r))},express:e=>{const t=_e(e);return Pe(r=>t.test(yt(r)))},path:e=>Pe(t=>yt(t)===e)},qs=i(({headers:e})=>{if(b("Generating header matcher"),!e){b("  No header expectations defined - skipping");return}const t=Ke.toLowerCase(e);return b("  Expected headers:",t),(r,{headers:s={}})=>{b("Attempting to match headers");const a=Ke.toLowerCase(Ke.normalize(s));return b("  Expected headers:",t),b("  Actual headers:",a),Object.keys(t).every(c=>Ke.equal(a[c],t[c]))}},"getHeaderMatcher"),zs=i(({method:e})=>{if(b("Generating method matcher"),!e){b("  No method expectations defined - skipping");return}return b("  Expected method:",e),(t,{method:r})=>{b("Attempting to match method");const s=r?r.toLowerCase():"get";return b("  Expected method:",e),b("  Actual method:",s),e===s}},"getMethodMatcher"),Gs=i(({query:e})=>{if(b("Generating query parameters matcher"),!e){b("  No query parameters expectations defined - skipping");return}const t=fe.parse(fe.stringify(e));b("  Expected query parameters:",e);const r=Object.keys(t);return s=>{b("Attempting to match query parameters");const a=fe.parse(Bs(s));return b("  Expected query parameters:",t),b("  Actual query parameters:",a),r.every(c=>Array.isArray(a[c])?Array.isArray(t[c])?bn(a[c].sort(),t[c].sort()):!1:a[c]===t[c])}},"getQueryStringMatcher"),Hs=i(({params:e,url:t})=>{if(b("Generating path parameters matcher"),!e){b("  No path parameters expectations defined - skipping");return}if(!/express:/.test(t))throw new Error("fetch-mock: matching on params is only possible when using an express: matcher");b("  Expected path parameters:",e);const r=Object.keys(e),s=[],a=_e(t.replace(/^express:/,""),s);return c=>{b("Attempting to match path parameters");const d=a.exec(yt(c))||[];d.shift();const g=s.reduce((l,{name:p},h)=>d[h]?Object.assign(l,{[p]:d[h]}):l,{});return b("  Expected path parameters:",e),b("  Actual path parameters:",g),r.every(l=>g[l]===e[l])}},"getParamsMatcher"),Js=i((e,t)=>{const r=t.getOption("matchPartialBody",e),{body:s}=e;return b("Generating body matcher"),(a,{body:c,method:d="get"})=>{if(b("Attempting to match body"),d.toLowerCase()==="get")return b("  GET request - skip matching body"),!0;let g;try{b("  Parsing request body as JSON"),g=JSON.parse(c)}catch(l){b("  Failed to parse request body as JSON",l)}return b("Expected body:",s),b("Actual body:",g),r&&b("matchPartialBody is true - checking for partial match only"),g&&(r?yn(g,s):bn(g,s))}},"getBodyMatcher"),en=i((e,t,r)=>{b("  Matching using full url",t);const s=Zt(t);return b("  Normalised url to:",t),e.identifier===t&&(b("  Updating route identifier to match normalized url:",t),e.identifier=s),a=>(b("Expected url:",s),b("Actual url:",a),r&&s.indexOf("?")?(b("Ignoring query string when matching url"),a.indexOf(s)===0):Zt(a)===s)},"getFullUrlMatcher"),Ws=i(({functionMatcher:e})=>(b("Detected user defined function matcher",e),(...t)=>(b("Calling function matcher with arguments",t),e(...t))),"getFunctionMatcher"),Ks=i(e=>{b("Generating url matcher");const{url:t,query:r}=e;if(t==="*")return b("  Using universal * rule to match any url"),()=>!0;if(t instanceof RegExp)return b("  Using regular expression to match url:",t),s=>t.test(s);if(t.href)return b("  Using URL object to match url",t),en(e,t.href,r);for(const s in Qt)if(t.indexOf(s+":")===0){b(`  Using ${s}: pattern to match url`,t);const a=t.replace(new RegExp(`^${s}:`),"");return Qt[s](a)}return en(e,t,r)},"getUrlMatcher");var Xs=[{name:"query",matcher:Gs},{name:"method",matcher:zs},{name:"headers",matcher:qs},{name:"params",matcher:Hs},{name:"body",matcher:Js,usesBody:!0},{name:"functionMatcher",matcher:Ws},{name:"url",matcher:Ks}];const{debug:tn,setDebugNamespace:nn,getDebug:Xe}=he,rn=i(e=>e instanceof RegExp||typeof e=="string"||typeof e=="object"&&"href"in e,"isUrlMatcher"),Vs=i(e=>typeof e=="function","isFunctionMatcher");class ee{constructor(t,r){this.fetchMock=r,Xe("compileRoute()")("Compiling route"),this.init(t),this.sanitize(),this.validate(),this.generateMatcher(),this.limit(),this.delayResponse()}validate(){if(!("response"in this))throw new Error("fetch-mock: Each route must define a response");if(!ee.registeredMatchers.some(({name:t})=>t in this))throw new Error("fetch-mock: Each route must specify some criteria for matching calls to fetch. To match all calls use '*'")}init(t){const[r,s,a={}]=t,c={};rn(r)||Vs(r)?c.matcher=r:Object.assign(c,r),typeof s<"u"&&(c.response=s),Object.assign(c,a),Object.assign(this,c)}sanitize(){const t=Xe("sanitize()");t("Sanitizing route properties"),this.method&&(t(`Converting method ${this.method} to lower case`),this.method=this.method.toLowerCase()),rn(this.matcher)&&(t("Mock uses a url matcher",this.matcher),this.url=this.matcher,delete this.matcher),this.functionMatcher=this.matcher||this.functionMatcher,t("Setting route.identifier..."),t(`  route.name is ${this.name}`),t(`  route.url is ${this.url}`),t(`  route.functionMatcher is ${this.functionMatcher}`),this.identifier=this.name||this.url||this.functionMatcher,t(`  -> route.identifier set to ${this.identifier}`)}generateMatcher(){nn("generateMatcher()"),tn("Compiling matcher for route");const t=ee.registeredMatchers.map(({name:r,matcher:s,usesBody:a})=>this[r]&&{matcher:s(this,this.fetchMock),usesBody:a}).filter(r=>Boolean(r));this.usesBody=t.some(({usesBody:r})=>r),tn("Compiled matcher for route"),nn(),this.matcher=(r,s={},a)=>t.every(({matcher:c})=>c(r,s,a))}limit(){const t=Xe("limit()");if(t("Limiting number of requests to handle by route"),!this.repeat){t("  No `repeat` value set on route. Will match any number of requests");return}t(`  Route set to repeat ${this.repeat} times`);const r=this.matcher;let s=this.repeat;this.matcher=(a,c)=>{if(s&&r(a,c))return s--,!0},this.reset=()=>s=this.repeat}delayResponse(){const t=Xe("delayResponse()");if(t("Applying response delay settings"),this.delay){t(`  Wrapping response in delay of ${this.delay} miliseconds`);const r=this.response;this.response=()=>(t(`Delaying response by ${this.delay} miliseconds`),new Promise(s=>setTimeout(()=>s(r),this.delay)))}else t("  No delay set on route. Will respond 'immediately' (but asynchronously)")}static addMatcher(t){ee.registeredMatchers.push(t)}}i(ee,"Route");ee.registeredMatchers=[];Xs.forEach(ee.addMatcher);var Ct=ee;const{setDebugPhase:Qe,setDebugNamespace:et,debug:w}=he,{normalizeUrl:Cn}=nt,q={},Ys=i(e=>typeof e=="string"&&/^[\da-zA-Z\-]+$/.test(e),"isName"),Zs=i(function(e,t={},r){return{matcher:e}=new Ct([Object.assign({matcher:e,response:"ok"},t)],this),r.filter(({url:s,options:a})=>e(Cn(s),a))},"filterCallsWithMatcher"),ne=i(e=>function(...t){Qe("inspect");const r=e.call(this,...t);return Qe(),r},"formatDebug"),Qs=i(e=>{if(!e)return;const{url:t,options:r,request:s,identifier:a,isUnmatched:c,response:d}=e,g=[t,r];return g.request=s,g.identifier=a,g.isUnmatched=c,g.response=d,g},"callObjToArray");q.filterCalls=function(e,t){w("Filtering fetch calls");let r=this._calls,s="*";return[!0,"matched"].includes(e)?(w(`Filter provided is ${e}. Returning matched calls only`),r=r.filter(({isUnmatched:a})=>!a)):[!1,"unmatched"].includes(e)?(w(`Filter provided is ${e}. Returning unmatched calls only`),r=r.filter(({isUnmatched:a})=>a)):typeof e>"u"?(w("Filter provided is undefined. Returning all calls"),r=r):Ys(e)?(w("Filter provided, looks like the name of a named route. Returning only calls handled by that route"),r=r.filter(({identifier:a})=>a===e)):(s=e==="*"?"*":Cn(e),this.routes.some(({identifier:a})=>a===s)&&(w(`Filter provided, ${e}, identifies a route. Returning only calls handled by that route`),r=r.filter(a=>a.identifier===s))),(t||s!=="*")&&r.length&&(typeof t=="string"&&(t={method:t}),w("Compiling filter and options to route in order to filter all calls",e),r=Zs.call(this,s,t,r)),w(`Retrieved ${r.length} calls`),r.map(Qs)};q.calls=ne(function(e,t){return w("retrieving matching calls"),this.filterCalls(e,t)});q.lastCall=ne(function(e,t){return w("retrieving last matching call"),[...this.filterCalls(e,t)].pop()});q.lastUrl=ne(function(e,t){return w("retrieving url of last matching call"),(this.lastCall(e,t)||[])[0]});q.lastOptions=ne(function(e,t){return w("retrieving options of last matching call"),(this.lastCall(e,t)||[])[1]});q.lastResponse=ne(function(e,t){w("retrieving respose of last matching call"),console.warn(`When doing all the following:
- using node-fetch
- responding with a real network response (using spy() or fallbackToNetwork)
- using \`fetchMock.LastResponse()\`
- awaiting the body content
... the response will hang unless your source code also awaits the response body.
This is an unavoidable consequence of the nodejs implementation of streams.
`);const r=(this.lastCall(e,t)||[]).response;try{return r.clone()}catch{return Object.entries(r._fmResults).forEach(([a,c])=>{r[a]=()=>c}),r}});q.called=ne(function(e,t){return w("checking if matching call was made"),Boolean(this.filterCalls(e,t).length)});q.flush=ne(async function(e){et("flush"),w(`flushing all fetch calls. ${e?"":"Not "}waiting for response bodies to complete download`);const t=this._holdingPromises;this._holdingPromises=[],w(`${t.length} fetch calls to be awaited`),await Promise.all(t),w("All fetch calls have completed"),e&&this._holdingPromises.length&&(w("Awaiting all fetch bodies to download"),await this.flush(e),w("All fetch bodies have completed downloading")),et()});q.done=ne(function(e){Qe("inspect"),et("done"),w("Checking to see if expected calls have been made");let t;e&&typeof e!="boolean"?(w("Checking to see if expected calls have been made for single route:",e),t=[{identifier:e}]):(w("Checking to see if expected calls have been made for all routes"),t=this.routes);const r=t.map(({identifier:s})=>{if(!this.called(s))return w("No calls made for route:",s),console.warn(`Warning: ${s} not called`),!1;const a=(this.routes.find(d=>d.identifier===s)||{}).repeat;if(!a)return w("Route has been called at least once, and no expectation of more set:",s),!0;const c=this.filterCalls(s).length;return w(`Route called ${c} times:`,s),a>c?(w(`Route called ${c} times, but expected ${a}:`,s),console.warn(`Warning: ${s} only called ${c} times, but ${a} expected`),!1):!0}).every(s=>s);return et(),Qe(),r});var eo=q;const{debug:vn}=he,P=Object.assign({},As,Cs,eo);P.addMatcher=function(e){Ct.addMatcher(e)};P.config={fallbackToNetwork:!1,includeContentLength:!0,sendAsJson:!0,warnOnFallback:!0,overwriteRoutes:void 0};P.createInstance=function(){vn("Creating fetch-mock instance");const e=Object.create(P);return e._uncompiledRoutes=(this._uncompiledRoutes||[]).slice(),e.routes=e._uncompiledRoutes.map(t=>this.compileRoute(t)),e.fallbackResponse=this.fallbackResponse||void 0,e.config=Object.assign({},this.config||P.config),e._calls=[],e._holdingPromises=[],e.bindMethods(),e};P.compileRoute=function(e){return new Ct(e,this)};P.bindMethods=function(){this.fetchHandler=P.fetchHandler.bind(this),this.reset=this.restore=P.reset.bind(this),this.resetHistory=P.resetHistory.bind(this),this.resetBehavior=P.resetBehavior.bind(this)};P.sandbox=function(){vn("Creating sandboxed fetch-mock instance");const t=Object.assign(i((r,s)=>t.fetchHandler(r,s),"fetchMockProxy"),P,this.createInstance(),{Headers:this.config.Headers,Request:this.config.Request,Response:this.config.Response});return t.bindMethods(),t.isSandbox=!0,t.default=t,t};P.getOption=function(e,t={}){return e in t?t[e]:this.config[e]};var ke=P;const to={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};var no=to;const be=typeof window<"u"?window:self,{setUrlImplementation:ro}=nt;ro(be.URL);ke.global=be;ke.statusTextMap=no;ke.config=Object.assign(ke.config,{Promise:be.Promise,Request:be.Request,Response:be.Response,Headers:be.Headers});var pe=ke.createInstance();const uo={parameters:{storySource:{source:`/*
 *
 * OSIS stands for Open Student Information System. It's an application
 * designed to manage the core business of higher education institutions,
 * such as universities, faculties, institutes and professional schools.
 * The core business involves the administration of students, teachers,
 * courses, programs and so on.
 *
 * Copyright (C) 2015-2023 Universit catholique de Louvain (http://www.uclouvain.be)
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * A copy of this license - GNU General Public License - is available
 * at the root of the source code of this program.  If not,
 * see http://www.gnu.org/licenses/.
 *
 */

import CommentThread from './CommentThread.vue';
import fetchMock from 'fetch-mock';
import type {Meta, StoryFn} from "@storybook/vue3";
import type {EntriesResponse} from "./interfaces";

export default {
  title: 'CommentThread',
  component: CommentThread,
} as Meta;

const Template: StoryFn<typeof CommentThread> = (args) => ({
  components: {CommentThread},
  setup() {
    fetchMock.restore().mock('path:/api', mockEntries);
    return {args};
  },
  template: \`
    <CommentThread v-bind="args" url="/api" />
  \`,
});

const mockEntries: EntriesResponse = {
  results: [
    {
      uuid: "8784bf99-d4f6-4971-99cf-5227afbeca0f",
      comment: "Lorem ipsum dolor amet",
      created_at: "2023-03-03T11:37:05.493008",
      author: "John Doe",
      tags: [],
      extra_data: {},
      links: {
        "edit": "/api/dac97c6d-ddb9-47cf-bf72-913fa0ebbbfd/8784bf99-d4f6-4971-99cf-5227afbeca0f",
        "delete": "/api/dac97c6d-ddb9-47cf-bf72-913fa0ebbbfd/8784bf99-d4f6-4971-99cf-5227afbeca0f",
      },
    },
    {
      uuid: "8784bf99-d4f6-4971-99cf-5227afbeca0f",
      comment: "Consetetur sadipscing elitr, sed diam nonumy eirmod",
      created_at: "2023-03-02T11:37:05.493008",
      author: "John Doe",
      tags: [],
      extra_data: {},
      links: {
        "edit": {error: "Non"},
        "delete": {error: "Non"},
      },
    },
    {
      uuid: "8784bf99-d4f6-4971-99cf-5227afbeca0f",
      comment: "Et dolore magna aliquyam erat, sed diam voluptua.",
      created_at: "2023-03-01T11:37:05.493008",
      author: "Bob Smith",
      tags: [],
      extra_data: {},
      links: {
        "edit": "/api/dac97c6d-ddb9-47cf-bf72-913fa0ebbbfd/8784bf99-d4f6-4971-99cf-5227afbeca0f",
        "delete": "/api/dac97c6d-ddb9-47cf-bf72-913fa0ebbbfd/8784bf99-d4f6-4971-99cf-5227afbeca0f",
      },
    },
  ],
  count: 3,
  next: null,
  previous: null,
  create: "/api/dac97c6d-ddb9-47cf-bf72-913fa0ebbbfd/",
};

export const Default = Template.bind({});
Default.args = {
  headerTitle: "Comments about object",
};

export const NoComments = () => {
  fetchMock.restore().mock('path:/api', {...mockEntries, results: []});
  return {
    components: {CommentThread},
    template: '<CommentThread url="/api"/>',
  };
};

export const HttpError = () => {
  fetchMock.restore().mock('path:/api', 404);
  return {
    components: {CommentThread},
    template: '<CommentThread url="/api"/>',
  };
};

export const Exception = () => {
  fetchMock.restore().mock('path:/api', {throws: new Error('Some network error')});
  return {
    components: {CommentThread},
    template: '<CommentThread url="/api"/>',
  };
};

export const WithoutAdding = () => {
  fetchMock.restore().mock('path:/api', {...mockEntries, create: {error: "Nope"}});
  return {
    components: {CommentThread},
    template: '<CommentThread url="/api"/>',
  };
};

export const Paginated = () => {
  fetchMock.restore().mock('path:/api', {...mockEntries, next: "/api?next", previous: "/api?previous"});
  return {
    components: {CommentThread},
    template: '<CommentThread url="/api" />',
  };
};


export const Ckeditor = () => {
  fetchMock.restore().mock('path:/api', {...mockEntries, results: []});
  return {
    components: {CommentThread},
    template: '<CommentThread url="/api" :rich-text-config="{}" />',
  };
};
`,locationsMap:{default:{startLoc:{col:48,line:37},endLoc:{col:2,line:46},startBody:{col:48,line:37},endBody:{col:2,line:46}},"no-comments":{startLoc:{col:26,line:98},endLoc:{col:1,line:104},startBody:{col:26,line:98},endBody:{col:1,line:104}},"http-error":{startLoc:{col:25,line:106},endLoc:{col:1,line:112},startBody:{col:25,line:106},endBody:{col:1,line:112}},exception:{startLoc:{col:25,line:114},endLoc:{col:1,line:120},startBody:{col:25,line:114},endBody:{col:1,line:120}},"without-adding":{startLoc:{col:29,line:122},endLoc:{col:1,line:128},startBody:{col:29,line:122},endBody:{col:1,line:128}},paginated:{startLoc:{col:25,line:130},endLoc:{col:1,line:136},startBody:{col:25,line:130},endBody:{col:1,line:136}},ckeditor:{startLoc:{col:24,line:139},endLoc:{col:1,line:145},startBody:{col:24,line:139},endBody:{col:1,line:145}}}}},title:"CommentThread",component:te},so=i(e=>({components:{CommentThread:te},setup(){return pe.restore().mock("path:/api",Me),{args:e}},template:`
    <CommentThread v-bind="args" url="/api" />
  `}),"Template"),Me={results:[{uuid:"8784bf99-d4f6-4971-99cf-5227afbeca0f",comment:"Lorem ipsum dolor amet",created_at:"2023-03-03T11:37:05.493008",author:"John Doe",tags:[],extra_data:{},links:{edit:"/api/dac97c6d-ddb9-47cf-bf72-913fa0ebbbfd/8784bf99-d4f6-4971-99cf-5227afbeca0f",delete:"/api/dac97c6d-ddb9-47cf-bf72-913fa0ebbbfd/8784bf99-d4f6-4971-99cf-5227afbeca0f"}},{uuid:"8784bf99-d4f6-4971-99cf-5227afbeca0f",comment:"Consetetur sadipscing elitr, sed diam nonumy eirmod",created_at:"2023-03-02T11:37:05.493008",author:"John Doe",tags:[],extra_data:{},links:{edit:{error:"Non"},delete:{error:"Non"}}},{uuid:"8784bf99-d4f6-4971-99cf-5227afbeca0f",comment:"Et dolore magna aliquyam erat, sed diam voluptua.",created_at:"2023-03-01T11:37:05.493008",author:"Bob Smith",tags:[],extra_data:{},links:{edit:"/api/dac97c6d-ddb9-47cf-bf72-913fa0ebbbfd/8784bf99-d4f6-4971-99cf-5227afbeca0f",delete:"/api/dac97c6d-ddb9-47cf-bf72-913fa0ebbbfd/8784bf99-d4f6-4971-99cf-5227afbeca0f"}}],count:3,next:null,previous:null,create:"/api/dac97c6d-ddb9-47cf-bf72-913fa0ebbbfd/"},oo=so.bind({});oo.args={headerTitle:"Comments about object"};const lo=i(()=>(pe.restore().mock("path:/api",{...Me,results:[]}),{components:{CommentThread:te},template:'<CommentThread url="/api"/>'}),"NoComments"),fo=i(()=>(pe.restore().mock("path:/api",404),{components:{CommentThread:te},template:'<CommentThread url="/api"/>'}),"HttpError"),ho=i(()=>(pe.restore().mock("path:/api",{throws:new Error("Some network error")}),{components:{CommentThread:te},template:'<CommentThread url="/api"/>'}),"Exception"),po=i(()=>(pe.restore().mock("path:/api",{...Me,create:{error:"Nope"}}),{components:{CommentThread:te},template:'<CommentThread url="/api"/>'}),"WithoutAdding"),go=i(()=>(pe.restore().mock("path:/api",{...Me,next:"/api?next",previous:"/api?previous"}),{components:{CommentThread:te},template:'<CommentThread url="/api" />'}),"Paginated"),mo=i(()=>(pe.restore().mock("path:/api",{...Me,results:[]}),{components:{CommentThread:te},template:'<CommentThread url="/api" :rich-text-config="{}" />'}),"Ckeditor"),yo=["Default","NoComments","HttpError","Exception","WithoutAdding","Paginated","Ckeditor"];export{mo as Ckeditor,oo as Default,ho as Exception,fo as HttpError,lo as NoComments,go as Paginated,po as WithoutAdding,yo as __namedExportsOrder,uo as default};
//# sourceMappingURL=CommentThread.stories-a1227ba7.js.map
